document.addEventListener("DOMContentLoaded",(function(){var e=localStorage.getItem("jwtToken"),t=document.querySelector(".card-body h3.text-warning"),n=document.querySelectorAll(".card-body h3.text-warning")[1],r=document.querySelector(".gauge-box p.display-4");fetch("http://127.0.0.1:5000/api/inference_requests",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){if(!Array.isArray(e))throw new Error("Unexpected API response format. Expected an array of requests.");var o=new Date,c=e.filter((function(e){var t=new Date(e.request_creation);return o-t<=2592e6})),a=c.length;t.textContent=a;var i=c.filter((function(e){return e.pallet_type})).length,u=(a>0&&(i/a*100).toFixed(2),c.map((function(e){var t=new Date(e.request_creation).getTime();return new Date(e.answer_time).getTime()-t}))),s=c.map((function(e){return e.confidence_level})),d=s.reduce((function(e,t){return e+t}),0),l=s.length>0?(d/s.length*100).toFixed(2):0,g=u.reduce((function(e,t){return e+t}),0),f=u.length>0?(g/u.length).toFixed(2):0,h=(f/1e3).toFixed(2);r.textContent="".concat(h,"s"),n.textContent="".concat(l,"%"),console.log({requestCount:a,confidenceRateElement:n,avgProcessingTime:f,avgProcessingTimeInSeconds:h,totalProcessingTime:g})})).catch((function(e){console.error("Error fetching or processing inference request data:",e)}))}));