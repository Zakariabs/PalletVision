(()=>{var t=new URLSearchParams(window.location.search).get("station_id");t?(function(t){return fetch("http://127.0.0.1:5000/api/stations/".concat(t)).then((function(t){if(!t.ok)throw new Error("Failed to fetch station details");return t.json()})).then((function(t){var e=document.getElementById("station-name"),n=document.getElementById("station-info"),a=document.getElementById("station-status"),o=a.querySelector(".status-indicator");return e.textContent=t.station_name,o.textContent=t.station_status,a.className="status-box p-3 rounded text-white ".concat(t.status_class),n.style.display="flex",o.style.display="inline",t})).catch((function(t){throw console.error("Error fetching station details:",t),t}))}(t).then((function(e){var n=e.station_status;!function(t,e){var n=document.querySelector(".image-box"),a=document.querySelector(".image-placeholder");"Offline"!==e?fetch("http://127.0.0.1:5000/api/stations/".concat(t,"/current_image")).then((function(t){if(!t.ok)throw new Error("Failed to fetch current image");return t.json()})).then((function(t){t.image?(n.innerHTML='\n                    <img src="'.concat(t.image,'" alt="Station Image" class="station-image">\n                    <p class="text-muted">').concat("Processing"===e?"Waiting for answer":"Last processed image","</p>\n                "),a.style.display="block"):a.style.display="none"})).catch((function(t){return console.error("Error fetching station image:",t)})):a.style.display="none"}(t,n)})).catch((function(t){console.error("Error processing station details:",t)})),function(t){fetch("http://127.0.0.1:5000/api/stations/".concat(t,"/inference_requests")).then((function(t){if(!t.ok)throw new Error("Failed to fetch inference requests");return t.json()})).then((function(t){!function(t){var e=document.getElementById("inference-requests");e.innerHTML="",t.forEach((function(t){var n="\n            <tr>\n                <td>".concat(new Date(t.answer_time).toLocaleString(),"</td>\n                <td>").concat(t.pallet_type,"</td>\n                <td>\n                    ").concat(t.initial_image_path?'<img src="'.concat(t.initial_image_path.replace("/app/app/ai_service/images/","http://localhost:5000/images/"),'" alt="Initial Image" class="table-image">'):'<span class="text-muted">No Image</span>',"\n                </td>\n                <td>\n                    ").concat(t.inferred_image_path?'<img src="'.concat(t.inferred_image_path.replace("/app/app/ai_service/","http://localhost:5000/images/"),'" alt="Inferred Image" class="table-image">'):'<span class="text-muted">No Image</span>',"\n                </td>\n                <td>").concat((100*t.confidence_level).toFixed(2),"%</td>\n            </tr>\n        ");e.insertAdjacentHTML("afterbegin",n)}))}(t)})).catch((function(t){return console.error("Error fetching inference requests:",t)}))}(t)):console.error("No station_id provided in the URL")})();